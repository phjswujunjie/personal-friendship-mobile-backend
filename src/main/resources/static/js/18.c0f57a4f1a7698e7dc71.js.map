{"version":3,"sources":["webpack:///src/components/Chat/Chat.vue","webpack:///./src/components/Chat/Chat.vue?35ef","webpack:///./src/components/Chat/Chat.vue"],"names":["Chat","name","data","headers","token","window","localStorage","getItem","friendList","friendId","friendStatus","messageNumber","messageList","filters","showMessageNumber","val","showMessage","replaceAll","length","substring","methods","toHomepage","location","href","created","_this","this","$http","get","then","res","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","_data","value","push","id","homepageLocation","err","return","URLSearchParams","append","post","console","log","setInterval","Chat_Chat","render","_vm","_h","$createElement","_c","_self","staticClass","key","$route","fullPath","_v","staticStyle","text-align","margin","position","font-size","top","right","cursor","attrs","title","on","click","margin-bottom","color","_l","friend","to","width","height","src","avatar","Number","background-color","bottom","padding","border-radius","_s","_f","_e","left","nickname","content","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/18.c0f57a4f1a7698e7dc71.js","sourcesContent":["<template>\n  <div class=\"container\">\n    <article class=\"w1\">\n      <section class=\"center\">\n        <div class=\"main\">\n          <router-view :key=\"$route.fullPath\"></router-view>\n        </div>\n      </section>\n      <aside class=\"left\">\n        <h3 style=\"text-align: center;margin: 10px 0 10px\">\n          <i title=\"主页\" @click=\"toHomepage\" class=\"el-icon-arrow-left\" style=\"position: relative;font-size: 40px;top: 7px;right: 50px;cursor: pointer\">\n          </i>我的好友\n        </h3>\n        <hr style=\"margin-bottom: 0;color: lightgray\">\n        <router-link v-for=\"friend in friendList\" :key=\"friend.id\" :to=\"friend.homepageLocation\" class=\"linkClass\">\n          <img width=\"50px\" height=\"50px\" class=\"img-circle\" style=\"position: relative;top: 15px\" :src=\"friend.avatar\"/>\n          <sup v-if=\"messageNumber && Number(messageNumber[friend.id]) > 0\" style=\"color: white;background-color: red;position: relative;right: 20px;bottom: 9px;padding: 2px 5px;border-radius: 10px\">\n            {{ Number(messageNumber[friend.id]) | showMessageNumber }}\n          </sup>\n          <p style=\"position: relative;bottom: 32px;left: 60px;color: black;width: 190px\">{{ friend.nickname }}</p>\n          <p v-if=\"friendStatus && friendStatus[friend.id]\" style=\"color: green;position: relative;bottom: 38px;left: 60px;width: 50px;font-size: 8px\">\n            [<i class=\"el-icon-circle-check\"></i>在线]\n          </p>\n          <p v-else-if=\"friendStatus\" style=\"color: indianred;position: relative;bottom: 38px;left: 60px;width: 50px;font-size: 8px\">\n            [<i class=\"el-icon-circle-close\"></i>离线]\n          </p>\n          <p v-if=\"messageNumber && Number(messageNumber[friend.id]) > 0\" class=\"unreadMessage\" style=\"position: relative;left: 105px;width: 160px;color: gray;bottom: 65px;font-size: 12px\">{{messageList[friend.id].content | showMessage}}</p>\n        </router-link>\n      </aside>\n    </article>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Chat\",\n  data: function () {\n    return {\n      headers: {\n        headers: {\n          token: window.localStorage.getItem(\"token\")\n        }\n      },\n      friendList: null,\n      friendId: [],\n      friendStatus: null,\n      messageNumber: null,\n      messageList: null,\n    }\n  },\n  filters:{\n    showMessageNumber: function (val){\n      if (val > 99){\n        return \"99+\"\n      }\n      return val\n    },\n    showMessage: function (val) {\n      if (val.replaceAll(\"<br/>\", \" \").length > 12){\n        return val.replaceAll(\"<br/>\", \" \").substring(0, 12) + \"...\"\n      }\n      return val.replaceAll(\"<br/>\", \" \")\n    }\n  },\n  methods:{\n    toHomepage: function () {\n      location.href = \"http://43.139.180.101:8080/homepage\"\n    }\n  },\n  created() {\n    this.$http.get(\"http://43.139.180.101:8080/friends\", this.headers).then(res => {\n      this.friendList = res.data.data\n      for (const data of this.friendList) {\n        this.friendId.push(data.id)\n        data.homepageLocation = \"/chat/userChat/\" + data.id\n      }\n      const data = new URLSearchParams()\n      data.append(\"idList\", this.friendId)\n      if (this.friendId.length !== 0) {\n        this.$http.post(\"http://43.139.180.101:8080/friends/queryStatus\", data, this.headers).then(res => {\n          this.friendStatus = res.data.data[0]\n          console.log(res.data)\n          this.messageNumber = res.data.data[1]\n          this.messageList = res.data.data[2]\n        })\n       setInterval(() => {\n         this.$http.post(\"http://43.139.180.101:8080/friends/queryStatus\", data,  this.headers).then(res => {\n           this.friendStatus = res.data.data[0]\n           this.messageNumber = res.data.data[1]\n           this.messageList = res.data.data[2]\n         })\n       }, 2000)\n      }\n    })\n  },\n}\n</script>\n\n<style scoped>\n.router-link-active sup{\n  display: none;\n}\n.router-link-active .unreadMessage{\n  display: none;\n}\n\n.linkClass:hover {\n  opacity: 0.5;\n}\n\n.el-icon-arrow-left:hover{\n  opacity: 0.5;\n}\n\n.linkClass {\n  text-decoration: none;\n  display: block;\n  padding-left: 20px;\n  color: white;\n  cursor: pointer;\n  border-bottom: 1px lightgray solid;\n  height: 80px;\n}\n\n.w1 {\n  min-width: 700px;\n  overflow: hidden;\n}\n\n.center {\n  width: 100%;\n  float: left;\n}\n\n.main {\n  margin: 0 0 0 290px;\n}\n\n.left {\n  width: 290px;\n  height: 100vh;\n  float: left;\n  margin-left: -100%;\n  overflow: auto;\n  overflow-x: unset;\n  border: 1px solid lightgray;\n  background-color: white;\n}\n\n.left::-webkit-scrollbar {\n  display: block;\n  width: 6px;\n  background-color: whitesmoke;\n  border-radius: 10px;\n}\n\n.left::-webkit-scrollbar-thumb {\n  background-color: rgba(25, 132, 165, 0.7);\n  border-radius: 10px;\n}\n\n/*.right{*/\n/*  float: left;*/\n/*  width: 190px;*/\n/*  height: 500px;*/\n/*  background-color: red;*/\n/*  margin-left: -270px;*/\n/*}*/\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n\n.background-style {\n  border-radius: 7px\n}\n\n.background-style:hover {\n  background-color: lightgray;\n  opacity: 0.4;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Chat/Chat.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('article',{staticClass:\"w1\"},[_c('section',{staticClass:\"center\"},[_c('div',{staticClass:\"main\"},[_c('router-view',{key:_vm.$route.fullPath})],1)]),_vm._v(\" \"),_c('aside',{staticClass:\"left\"},[_c('h3',{staticStyle:{\"text-align\":\"center\",\"margin\":\"10px 0 10px\"}},[_c('i',{staticClass:\"el-icon-arrow-left\",staticStyle:{\"position\":\"relative\",\"font-size\":\"40px\",\"top\":\"7px\",\"right\":\"50px\",\"cursor\":\"pointer\"},attrs:{\"title\":\"主页\"},on:{\"click\":_vm.toHomepage}}),_vm._v(\"我的好友\\n      \")]),_vm._v(\" \"),_c('hr',{staticStyle:{\"margin-bottom\":\"0\",\"color\":\"lightgray\"}}),_vm._v(\" \"),_vm._l((_vm.friendList),function(friend){return _c('router-link',{key:friend.id,staticClass:\"linkClass\",attrs:{\"to\":friend.homepageLocation}},[_c('img',{staticClass:\"img-circle\",staticStyle:{\"position\":\"relative\",\"top\":\"15px\"},attrs:{\"width\":\"50px\",\"height\":\"50px\",\"src\":friend.avatar}}),_vm._v(\" \"),(_vm.messageNumber && Number(_vm.messageNumber[friend.id]) > 0)?_c('sup',{staticStyle:{\"color\":\"white\",\"background-color\":\"red\",\"position\":\"relative\",\"right\":\"20px\",\"bottom\":\"9px\",\"padding\":\"2px 5px\",\"border-radius\":\"10px\"}},[_vm._v(\"\\n          \"+_vm._s(_vm._f(\"showMessageNumber\")(Number(_vm.messageNumber[friend.id])))+\"\\n        \")]):_vm._e(),_vm._v(\" \"),_c('p',{staticStyle:{\"position\":\"relative\",\"bottom\":\"32px\",\"left\":\"60px\",\"color\":\"black\",\"width\":\"190px\"}},[_vm._v(_vm._s(friend.nickname))]),_vm._v(\" \"),(_vm.friendStatus && _vm.friendStatus[friend.id])?_c('p',{staticStyle:{\"color\":\"green\",\"position\":\"relative\",\"bottom\":\"38px\",\"left\":\"60px\",\"width\":\"50px\",\"font-size\":\"8px\"}},[_vm._v(\"\\n          [\"),_c('i',{staticClass:\"el-icon-circle-check\"}),_vm._v(\"在线]\\n        \")]):(_vm.friendStatus)?_c('p',{staticStyle:{\"color\":\"indianred\",\"position\":\"relative\",\"bottom\":\"38px\",\"left\":\"60px\",\"width\":\"50px\",\"font-size\":\"8px\"}},[_vm._v(\"\\n          [\"),_c('i',{staticClass:\"el-icon-circle-close\"}),_vm._v(\"离线]\\n        \")]):_vm._e(),_vm._v(\" \"),(_vm.messageNumber && Number(_vm.messageNumber[friend.id]) > 0)?_c('p',{staticClass:\"unreadMessage\",staticStyle:{\"position\":\"relative\",\"left\":\"105px\",\"width\":\"160px\",\"color\":\"gray\",\"bottom\":\"65px\",\"font-size\":\"12px\"}},[_vm._v(_vm._s(_vm._f(\"showMessage\")(_vm.messageList[friend.id].content)))]):_vm._e()])})],2)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-27afddb2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Chat/Chat.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-27afddb2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Chat.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chat.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chat.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-27afddb2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Chat.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-27afddb2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Chat/Chat.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}