webpackJsonp([6],{H7mw:function(t,i,e){"use strict";(function(t){var a=e("gBtx"),s=e.n(a),l=e("BO1k"),n=e.n(l);i.a={name:"CreateBlog",data:function(){return{fileList:[],text:"",is_public:"2",headers:{headers:{token:window.localStorage.getItem("token")}}}},created:function(){this.$http.post("http://43.139.180.101:8080/loginOrOut",{},this.headers).then(function(t){30001!==t.data.code&&(location.href="http://43.139.180.101:8080/homepage")})},methods:{submit:function(){var t=this,i=new FormData,e=!0,a=!1,s=void 0;try{for(var l,r=n()(this.fileList);!(e=(l=r.next()).done);e=!0){var o=l.value;null!==o&&i.append("files",o)}}catch(t){a=!0,s=t}finally{try{!e&&r.return&&r.return()}finally{if(a)throw s}}null!==i.get("files")||""!==this.text?(i.append("text",this.text),i.append("isPublic",this.is_public),this.$http.post("http://43.139.180.101:8080/blogs",i,this.headers).then(function(i){23001===i.data.code?(t.$message({message:"发布成功",type:"success",duration:700}),setTimeout(function(){location.reload()},700)):3e4===i.data.code?(t.$message.error("登陆状态失效,发布失败!"),setTimeout(function(){location.href="http://43.139.180.101:8080/homepage"},700)):t.$message.error("发布失败,请稍后再试!")})):this.$message.error("不能发布为空的博客!")},fileUpload:function(i){var e=this;console.log(i.target.files);var a=document.getElementById("img"),l=document.getElementById("label"),r=!0,o=!1,h=void 0;try{for(var c,d=n()(i.target.files);!(r=(c=d.next()).done);r=!0){var p=c.value,u=[],g=!0,m=!1,f=void 0;try{for(var v,b=n()(this.fileList);!(g=(v=b.next()).done);g=!0){var y=v.value;null!==y&&u.push(y)}}catch(t){m=!0,f=t}finally{try{!g&&b.return&&b.return()}finally{if(m)throw f}}if(9===u.length)return void this.$message.error("只能添加9个图像或视频!!");this.fileList.push(p);var _=document.createElement("div");_.classList.add("divElement");var x=document.createElement("span");if(x.classList.add("el-icon-circle-close"),x.classList.add("iElement"),x.setAttribute("flag",this.fileList.length-1+""),x.title="删除",x.onclick=function(t){e.fileList.splice(s()(t.target.getAttribute("flag")),1,null),t.target.parentNode.remove()},_.appendChild(x),a.insertBefore(_,l),p.type.startsWith("video")){var w=document.createElement("video");w.src=window.URL.createObjectURL(p),_.appendChild(w),w.controls=!0,w.oncanplay=function(){var t=this.clientHeight/this.clientWidth;this.clientWidth>this.clientHeight?(this.width=150,this.height=Math.floor(150*t),this.style.marginTop=(150-this.height)/2+"px",this.style.marginBottom=(150-this.height)/2+"px"):this.clientWidth<this.clientHeight?(this.height=150,this.width=Math.floor(150/t),this.style.marginLeft=(150-this.width)/2+"px",this.style.marginRight=(150-this.width)/2+"px"):(this.width=150,this.height=150,this.style.borderRadius="4px")}}else{_.title="双击放大",_.ondblclick=function(){t("#imageModal").modal({backdrop:"static"});var i=t("#originalImage")[0];i.src=this.lastChild.src,i.width=4*this.lastChild.width,i.height=4*this.lastChild.height};var L=new Image;L.src=window.URL.createObjectURL(p),_.appendChild(L),L.onload=function(){var t=this.height/this.width;this.width>this.height?(this.width=150,this.height=Math.floor(150*t),this.style.marginTop=(150-this.height)/2+"px",this.style.marginBottom=(150-this.height)/2+"px"):this.width<this.height?(this.height=150,this.width=Math.floor(150/t),this.style.marginLeft=(150-this.width)/2+"px",this.style.marginRight=(150-this.width)/2+"px"):(this.width=150,this.height=150,this.style.borderRadius="4px")}}}}catch(t){o=!0,h=t}finally{try{!r&&d.return&&d.return()}finally{if(o)throw h}}i.target.value=""}}}}).call(i,e("7t+N"))},HIAU:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("H7mw"),s={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticStyle:{"margin-top":"68px"},attrs:{id:"uploadFile"}},[e("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"fileUpload",multiple:"",accept:".gif,.png,.jpg,.jpeg,.mp4"},on:{change:t.fileUpload}}),t._v(" "),t._m(0),t._v(" "),e("div",{attrs:{id:"img"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{id:"text",placeholder:"快来分享新鲜事吧!"},domProps:{value:t.text},on:{input:function(i){i.target.composing||(t.text=i.target.value)}}}),t._v(" "),t._m(1)]),t._v(" "),e("div",{staticStyle:{margin:"50px auto 0",width:"400px"}},[e("el-radio",{staticStyle:{display:"inline-block"},attrs:{label:"1"},model:{value:t.is_public,callback:function(i){t.is_public=i},expression:"is_public"}},[t._v("仅自己可见")]),t._v(" "),e("el-radio",{staticStyle:{display:"inline-block"},attrs:{label:"2"},model:{value:t.is_public,callback:function(i){t.is_public=i},expression:"is_public"}},[t._v("仅朋友可见")]),t._v(" "),e("el-radio",{staticStyle:{display:"inline-block"},attrs:{label:"4"},model:{value:t.is_public,callback:function(i){t.is_public=i},expression:"is_public"}},[t._v("全部可见")])],1),t._v(" "),e("div",{staticStyle:{margin:"20px auto 0",width:"120px"}},[e("button",{attrs:{id:"submit"},on:{click:t.submit}},[t._v("发  布")])]),t._v(" "),t._m(2)])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticStyle:{"text-align":"center"}},[i("h3",[this._v("发布博客")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("label",{attrs:{for:"fileUpload",id:"label"}},[i("i",{staticClass:"el-icon-plus",attrs:{id:"icon"}}),i("br"),this._v(" "),i("span",{staticClass:"iconSpan"},[this._v("添加图片或视频(最多9个)")]),i("br"),this._v(" "),i("span",{staticClass:"iconSpan"},[this._v("(jpg,jpeg,png,gif,mp4等常见文件格式)")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel",id:"imageModal"}},[i("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[i("span",{staticStyle:{"font-size":"35px","margin-right":"10px"},attrs:{"aria-hidden":"true"}},[this._v("×")])]),this._v(" "),i("img",{attrs:{src:"",alt:"图像",id:"originalImage"}})])])])}]};var l=function(t){e("qgHb")},n=e("VU/8")(a.a,s,!1,l,null,null);i.default=n.exports},qgHb:function(t,i){}});
//# sourceMappingURL=6.a6f25b161cfaaaf1e342.js.map