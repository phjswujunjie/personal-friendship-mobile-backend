webpackJsonp([4],{bp3V:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("q6py"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{attrs:{id:"main"}},[i("h4",[t._v("全部博客("+t._s(t.blogNumber)+")")]),t._v(" "),t._l(t.blogs,function(e,a){return i("div",{staticClass:"blogDiv"},[i("div",{staticClass:"ownerInfoDiv"},[i("img",{staticClass:"img-circle",attrs:{src:e.user_avatar,width:"50px",height:"50px"}}),t._v(" "),i("span",{staticClass:"nicknameSpan"},[t._v(t._s(e.user_nickname))]),t._v(" "),i("span",{staticClass:"createTimeSpan"},[t._v("发布于"+t._s(e.create_time))]),t._v(" "),t.$store.state.isSelf?i("span",[i("i",{staticClass:"el-icon-arrow-down icon",staticStyle:{cursor:"pointer",color:"gray","border-radius":"9px",position:"absolute",right:"20px",top:"10px","font-size":"18px"},on:{click:t.displayMore}})]):t._e(),t._v(" "),i("div",{staticClass:"iconMore"},[i("h6",{attrs:{id:e.id},on:{click:t.deleteBlog}},[t._v("删除")]),t._v(" "),i("h6",[t._v("置顶")])])]),t._v(" "),i("div",{staticClass:"blogInfoDiv"},[i("div",{staticStyle:{"margin-left":"10px",width:"566px","word-break":"break-all","word-wrap":"break-word"}},[t._v(t._s(e.content)+"\n        ")]),t._v(" "),i("div",{staticStyle:{"margin-top":"15px",overflow:"hidden"}},[t._l(e.image,function(e){return"http://43.139.180.101:8080/static/upload/"!==e?i("div",{staticClass:"imageDiv"},[i("img",{staticClass:"image",staticStyle:{cursor:"zoom-in"},attrs:{src:e,title:"放大图像",alt:"图片"},on:{load:t.changeImage,dblclick:t.enlargeImage}})]):t._e()}),t._v(" "),t._l(e.video,function(e){return"http://43.139.180.101:8080/static/upload/"!==e?i("div",{staticClass:"imageDiv"},[i("video",{staticClass:"image",attrs:{src:e,controls:""},on:{canplay:t.changeVideo}})]):t._e()})],2)]),t._v(" "),i("div",{staticStyle:{"margin-left":"200px","margin-top":"25px"}},[i("span",{staticClass:"el-icon-chat-dot-square",staticStyle:{"margin-right":"150px",cursor:"pointer","font-size":"20px",color:"grey"},attrs:{title:"评论",id:e.id},on:{click:t.toBlogComment}}),t._v(" "),e.loginStatus?i("span",{staticClass:"iconfont icon-like",class:{likeOrange:1==e.isLike},staticStyle:{cursor:"pointer","font-size":"25px"},attrs:{title:"点赞",flag:e.id,index:a},on:{click:t.createLikes}},[0!=e.love_user_number?i("span",{staticStyle:{"font-size":"14px","margin-left":"2px",position:"relative",bottom:"4px"},attrs:{index:a,flag:e.id}},[t._v(t._s(e.love_user_number))]):t._e()]):i("span",{staticClass:"iconfont icon-like",staticStyle:{cursor:"pointer","font-size":"20px",color:"grey"},on:{click:t.tipLogin}},[i("span",{staticStyle:{"font-size":"14px","margin-left":"5px",position:"relative",bottom:"5px"}},[t._v(t._s(e.love_user_number))])])])])}),t._v(" "),0===t.blogNumber?i("div",{staticStyle:{"background-color":"white",width:"642px",height:"300px","border-radius":"5px"}},[t._m(0)]):t._e()],2),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{position:"relative",left:"290px",top:"140px"}},[e("i",{staticClass:"el-icon-warning",staticStyle:{"font-size":"50px",color:"#507daf"}}),this._v(" "),e("p",[this._v("暂无内容")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel",id:"imageModal"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{staticStyle:{"font-size":"35px","margin-right":"10px"},attrs:{"aria-hidden":"true"}},[this._v("×")])]),this._v(" "),e("img",{attrs:{src:"",alt:"图像",id:"originalImage"}})])])])}]};var o=function(t){i("gUfz")},l=i("VU/8")(a.a,s,!1,o,"data-v-4690d730",null);e.default=l.exports},gUfz:function(t,e){},q6py:function(t,e,i){"use strict";(function(t){e.a={name:"Blog",data:function(){return{blogs:[],flag:-1,blogNumber:null,headers:{headers:{token:window.localStorage.getItem("token")}}}},created:function(){var t=this;console.log("blog....."),this.$http.get("http://43.139.180.101:8080/blogs/users/"+this.$route.params.id,this.headers).then(function(e){t.blogs=e.data.data,t.blogNumber=t.blogs.length,console.log(e.data),console.log(t.$store.state.isSelf)})},methods:{createLikes:function(t){this.likeFlag=Number(this.blogs[t.target.getAttribute("index")].isLike),0===this.likeFlag?(this.likeFlag=1,this.blogs[t.target.getAttribute("index")].isLike=1,this.blogs[t.target.getAttribute("index")].love_user_number+=1):(this.likeFlag=0,this.blogs[t.target.getAttribute("index")].isLike=0,this.blogs[t.target.getAttribute("index")].love_user_number-=1);var e=new URLSearchParams;e.append("blogId",t.target.getAttribute("flag")),e.append("flag",this.likeFlag),this.$http.post("http://43.139.180.101:8080/likes/blog",e,this.headers).then(function(t){})},tipLogin:function(){this.$message({duration:"1000",message:"请先进行登录",type:"error"})},toBlogComment:function(t){location.href="http://43.139.180.101:8080/blogComment/"+t.target.id},deleteBlog:function(t){var e=this;this.$http.delete("http://43.139.180.101:8080/blogs/"+t.target.id,this.headers).then(function(i){21001===i.data.code&&(e.$message({message:"删除成功",type:"success",duration:700}),t.target.parentNode.parentNode.parentNode.remove(),e.blogNumber--)})},displayMore:function(t){this.flag*=-1,1===this.flag?t.target.parentNode.nextElementSibling.style.display="block":t.target.parentNode.nextElementSibling.style.display="none"},changeImage:function(t){var e=t.target,i=e.height/e.width;t.target.width>e.height?(e.width=130,e.height=Math.floor(130*i),e.style.marginTop=(130-e.height)/2+"px",e.style.marginBottom=(130-e.height)/2+"px"):t.target.width<e.height?(e.height=130,e.width=Math.floor(130/i),e.style.marginLeft=(130-e.width)/2+"px",e.style.marginRight=(130-e.width)/2+"px"):(e.width=130,e.height=130,e.style.borderRadius="4px"),e.style.display="inline-block"},changeVideo:function(t){var e=t.target,i=e.clientHeight/e.clientWidth;e.clientWidth>e.clientHeight?(e.width=130,e.height=Math.floor(130*i),e.style.marginTop=(130-e.height)/2+"px",e.style.marginBottom=(130-e.height)/2+"px"):e.clientWidth<e.clientHeight?(e.height=130,e.width=Math.floor(130/i),e.style.marginLeft=(130-e.width)/2+"px",e.style.marginRight=(130-e.width)/2+"px"):(e.width=130,e.height=130,e.style.borderRadius="4px"),e.style.display="block"},enlargeImage:function(e){t("#imageModal").modal({backdrop:"static"});var i=t("#originalImage")[0];i.src=e.target.src,i.width=4*e.target.width,i.height=4*e.target.height}}}}).call(e,i("7t+N"))}});
//# sourceMappingURL=4.8b2a322ffdd37d69c166.js.map