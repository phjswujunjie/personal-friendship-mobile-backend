webpackJsonp([18],{"4mZT":function(t,e){},iAFL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("BO1k"),s=a.n(i),r={name:"Chat",data:function(){return{headers:{headers:{token:window.localStorage.getItem("token")}},friendList:null,friendId:[],friendStatus:null,messageNumber:null,messageList:null}},filters:{showMessageNumber:function(t){return t>99?"99+":t},showMessage:function(t){return t.replaceAll("<br/>"," ").length>12?t.replaceAll("<br/>"," ").substring(0,12)+"...":t.replaceAll("<br/>"," ")}},methods:{toHomepage:function(){location.href="http://43.139.180.101:8080/homepage"}},created:function(){var t=this;this.$http.get("http://43.139.180.101:8080/friends",this.headers).then(function(e){t.friendList=e.data.data;var a=!0,i=!1,r=void 0;try{for(var n,o=s()(t.friendList);!(a=(n=o.next()).done);a=!0){var l=n.value;t.friendId.push(l.id),l.homepageLocation="/chat/userChat/"+l.id}}catch(t){i=!0,r=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw r}}var c=new URLSearchParams;c.append("idList",t.friendId),0!==t.friendId.length&&(t.$http.post("http://43.139.180.101:8080/friends/queryStatus",c,t.headers).then(function(e){t.friendStatus=e.data.data[0],console.log(e.data),t.messageNumber=e.data.data[1],t.messageList=e.data.data[2]}),setInterval(function(){t.$http.post("http://43.139.180.101:8080/friends/queryStatus",c,t.headers).then(function(e){t.friendStatus=e.data.data[0],t.messageNumber=e.data.data[1],t.messageList=e.data.data[2]})},2e3))})}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("article",{staticClass:"w1"},[a("section",{staticClass:"center"},[a("div",{staticClass:"main"},[a("router-view",{key:t.$route.fullPath})],1)]),t._v(" "),a("aside",{staticClass:"left"},[a("h3",{staticStyle:{"text-align":"center",margin:"10px 0 10px"}},[a("i",{staticClass:"el-icon-arrow-left",staticStyle:{position:"relative","font-size":"40px",top:"7px",right:"50px",cursor:"pointer"},attrs:{title:"主页"},on:{click:t.toHomepage}}),t._v("我的好友\n      ")]),t._v(" "),a("hr",{staticStyle:{"margin-bottom":"0",color:"lightgray"}}),t._v(" "),t._l(t.friendList,function(e){return a("router-link",{key:e.id,staticClass:"linkClass",attrs:{to:e.homepageLocation}},[a("img",{staticClass:"img-circle",staticStyle:{position:"relative",top:"15px"},attrs:{width:"50px",height:"50px",src:e.avatar}}),t._v(" "),t.messageNumber&&Number(t.messageNumber[e.id])>0?a("sup",{staticStyle:{color:"white","background-color":"red",position:"relative",right:"20px",bottom:"9px",padding:"2px 5px","border-radius":"10px"}},[t._v("\n          "+t._s(t._f("showMessageNumber")(Number(t.messageNumber[e.id])))+"\n        ")]):t._e(),t._v(" "),a("p",{staticStyle:{position:"relative",bottom:"32px",left:"60px",color:"black",width:"190px"}},[t._v(t._s(e.nickname))]),t._v(" "),t.friendStatus&&t.friendStatus[e.id]?a("p",{staticStyle:{color:"green",position:"relative",bottom:"38px",left:"60px",width:"50px","font-size":"8px"}},[t._v("\n          ["),a("i",{staticClass:"el-icon-circle-check"}),t._v("在线]\n        ")]):t.friendStatus?a("p",{staticStyle:{color:"indianred",position:"relative",bottom:"38px",left:"60px",width:"50px","font-size":"8px"}},[t._v("\n          ["),a("i",{staticClass:"el-icon-circle-close"}),t._v("离线]\n        ")]):t._e(),t._v(" "),t.messageNumber&&Number(t.messageNumber[e.id])>0?a("p",{staticClass:"unreadMessage",staticStyle:{position:"relative",left:"105px",width:"160px",color:"gray",bottom:"65px","font-size":"12px"}},[t._v(t._s(t._f("showMessage")(t.messageList[e.id].content)))]):t._e()])})],2)])])},staticRenderFns:[]};var o=a("VU/8")(r,n,!1,function(t){a("4mZT")},"data-v-27afddb2",null);e.default=o.exports}});
//# sourceMappingURL=18.c0f57a4f1a7698e7dc71.js.map